// Variables
@import "node_modules/bulma/sass/utilities/functions.sass";
@import "variables";

// Libraries
@import 'node_modules/bulma/bulma.sass';
@import 'node_modules/animate.css/animate';

// rewrite bulma styles
.section {
    padding: 2rem 1.5rem;
}

.button {
    &.is-link {
        padding-left: 0;
        padding-right: 0;
        &:hover {
            background-color: transparent;
        }
    }
}

.hero-buttons {
    @include from($tablet) {
        justify-content: flex-end;
    }
}

.control.has-icon .button.is-primary > .icon {
    color: #fff;
}

.footer {
    padding-bottom: 4rem;
    &.is-simple {
        background-color: transparent;
        opacity: 0.75;
    }
    &:not(.is-simple) {
        $gradient-top-left: darken(saturate(adjust-hue($tertiary, -10deg), 10%), 10%);
        $gradient-bottom-right: lighten(saturate(adjust-hue($tertiary, 10deg), 5%), 5%);
        background-image: linear-gradient(141deg, $gradient-top-left 0%, $tertiary 71%, $gradient-bottom-right 100%);
        .content,
        a.nav-item {
            color: white;
        }
    }
}

figure {
    margin-right: 0;
}

.vue-slider-piecewise li + li {
    margin-top: 0;
}

//hide before font loads
.wf-loading {
    h1, h2, h3, h4, h5, h6, a, p, label, span, div {
        visibility: hidden;
    }
}

// new global styles
@mixin has-border($border_direction) {
    border-#{$border_direction}: 1px solid $border;
}

.has-border-top {
    @include has-border(top);
}

.has-border-bottom {
    @include has-border(bottom);
}

.font-secondary-family {
    font-family: $family-secondary;
}

.image-wrapper {
    margin-bottom: $space-medium;
}

.icon {
    vertical-align: middle; // rewrite bulma
    &.has-border-circle {
        border: 2px solid;
        border-radius: 50%;
        .fa {
            font-size: $size-6;
            margin-top: -2px;
        }
    }
    .control.has-icon:not(.has-icon-right)  &.align-right {
        left: initial;
        right: ($size-normal * 2.5) / 2;
        transform: translateX(50%) translateY(-50%);
    }
    .control.has-icon &.is-danger {
        color: $danger;
    }
    & + span {
        vertical-align: middle;
        margin-left: 5px
    }
}

.link-inherit-color {
    color: inherit;
}

.card-footer-item {
    padding: 1.5rem;
}

.dropdown {
    position: relative;
    .dropdown-button {
        cursor: pointer;
        &.nav-toggle {
            display: block;
        }
    }
    @include from($desktop) {
        .dropdown-list {
            // @extend .box;
            padding: 0;
            display: none;
            position: absolute;
            top: $size-1;
            &:before,
            &:after {
                content: "";
                display: inline-block;
                position: absolute;
            }
            &.dropdown-list_align-right {
                right: 0.75rem;
                &:before {
                    top: -10px;
                    right: 3px;
                    bottom: auto;
                    border: 10px solid transparent;
                    border-top: 0;
                    border-bottom-color: $border;
                }
                &:after {
                    top: -9px;
                    right: 4px;
                    bottom: auto;
                    border: 9px solid transparent;
                    border-top: 0;
                    border-bottom-color: #fff;
                }
            }
            a {
                // @extend .nav-item;
                white-space: nowrap;
            }
        }
        &:hover .dropdown-list {
            display: block;
        }
    }
}

.panel-block {
    > .media {
        flex: 1;
    }
}

.box {
    &.is-circle {
        border-radius: 50%;
    }
}

.page-content {
    .nav {
        z-index: 1;
    }
}

.control.is-grouped.is-gapless > .control:not(:last-child) {
    margin-right: -1px;
}

.section {
    .has-max-width {
        max-width: 560px;
        margin-left: auto;
        margin-right: auto;
    }
}

@include from($tablet) {
    .copy-has-max-width {
        max-width: 640px;
        margin: 0 auto;
    }
}


// modify animations
.animated {
    &.notification {
        &.fadeOut {
            animation-delay: 3s;
        }
    }
    &.animated-fast {
        animation-duration: $speed;
    }
}

// global styles
// navigation
@include until($tablet) {
    .nav-left {
        display: none;
    }
    .nav-center {
        margin-left: 0;
    }
}

// page specific styles
body {
    // width: 100%;
    // height: 100%;
    overflow-x: hidden;
    &.home,
    &.login,
    &.signup {
        .page-content + .footer {
            display: none;
        }
    }
    &.login,
    &.signup,
    &[class^="password-reset"] {
        &.hero {
            justify-content: flex-start;
        }
        .page-content {
            .container {
                @include from(400px) {
                    margin: 0 auto;
                    width: 340px;
                }
            }
        }
        .section {
            background-color: transparent;
        }
        a.button:not(.is-primary) {
            color: $grey-darker;
        }
    }
    &.home {
        color: $text-secondary;
        .content {
            &, h1, h2, h3, h4, h5, h6, .title, .subtitle, strong {
                color: $text-secondary;
            }
            @include from($tablet) {
                text-align: center;
            }
        }
        .title,
        .subtitle {
            strong {
                font-weight: 700;
            }
        }
        .image img {
            height: 100%;
        }
        #app {
            height: auto;
            min-height: 100%;
            width: 100%;
            position: relative;
        }
        .page-content {
            position: relative;
            min-height: 100%;
            overflow: hidden;
        }
        .header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 101;
        }
        .sections {
            margin-top: 52px; // nav height
        }
        .tagline {
            margin-top: $space-xsmall;
            margin-bottom: $size-2;
        }
        .homepage-icon {
            position: relative;
            padding: 0;
        }
        .copy-has-max-width + .columns {
            margin-top: $size-2;
        }
        .disclaimer {
            display: inline-block;
            margin-bottom: $space-small;
        }
        #comparison,
        #number {
            .homepage-icon {
                margin: 0 auto $space-small;
                & + p {
                    margin: 0 auto $space-small;
                }
            }
        }
        #comparison {
            .homepage-icon + p {
                width: 180px;
            }
        }
        #steps {
            .title.is-5 {
                margin-bottom: 0.5rem;
            }
            .columns {
                @include tablet-only {
                    text-align: left;
                }
            }
            @include from($desktop) {
                .step-column-wrapper {
                    display: block;
                    .column {
                        margin: 0 auto;
                    }
                    .image {
                        margin: 0 auto;
                    }
                }
            }
        }
        .step-number {
            @extend .font-secondary-family;
            display: inline-block;
            width: $size-3;
            height: $size-3;
            line-height: $size-3;
            text-align: center;
            background: #fff;
            border-radius: 50%;
            position: absolute;
            top: 0;
            font-size: $size-4;
            @include from($desktop) {
                transform: translateX(70%);
            }
        }
        #number { // icon assets are not the same sizes, have to adjust them now
            .image {
                &.is-64x64 {
                    width: auto;
                    max-width: 80px;
                }
                img {
                    width: auto;
                    height: auto;
                    max-width: 100%;
                    max-height: 100%;
                    margin: 0 auto;
                }
            }
        }
        .symptoms-selector-wrapper {
            // max-width: 800px;
            margin-bottom: $space-medium;
        }
        .vue-slider-tooltip.vue-slider-tooltip-top {
            top: -3px;
        }
        @include from($widescreen) {
            .section {
                background-size: cover;
                background-repeat: no-repeat;
                background-position: center center;
                background-attachment: fixed;
                &:nth-child(1) {
                    background-image: url('/images/home/background_1.jpg');
                }
                &:nth-child(2) {
                    background-image: url('/images/home/background_2.jpg');
                }
                &:nth-child(3) {
                    background-image: url('/images/home/background_3.jpg');
                }
                &:nth-child(4) {
                    background-image: url('/images/home/background_4.png');
                    background-size: contain;
                    background-position: top center;
                }
                &:nth-child(5) {
                    background-image: url('/images/home/background_5.jpg');
                }
                .section-wrapper {
                    width: 95%;
                    margin: 0 auto;
                    padding: $space-medium;
                    background: rgba($light-tan, $opacity-dark);
                    background-image: linear-gradient(rgba($light-tan, $opacity-dark), rgba(#fff, $opacity-dark));
                }
            }
        }
        @include from($desktop) {
            #number,
            #symptoms {
                .columns {
                    text-align: left;
                }
            }
        }
    }
}

.dashboard {
    .app-wrapper {
        position: relative;
        min-height: 100vh;
    }
    .footer {
        position: absolute;
        left: 0;
        bottom: 0;
        width: 100%;
    }
    .hero,
    .nav {
        background-color: transparent;
    }
    .hero-body {
        padding: 2rem 1.5rem;
    }
}